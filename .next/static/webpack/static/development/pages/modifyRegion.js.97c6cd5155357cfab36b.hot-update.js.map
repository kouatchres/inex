{"version":3,"file":"static/webpack/static\\development\\pages\\modifyRegion.js.97c6cd5155357cfab36b.hot-update.js","sources":["webpack:///./src/components/DeleteRegion.jsx"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport { Mutation } from \"react-apollo\";\r\nimport gql from \"graphql-tag\";\r\nimport styled from \"styled-components\";\r\nimport { ALL_REGIONS_QUERY } from \"./Regions\";\r\n\r\nconst DELETE_REGION_MUTATION = gql`\r\n  mutation DELETE_REGION_MUTATION($id: ID!) {\r\n    deleteRegion(id: $id) {\r\n      id\r\n    }\r\n  }\r\n`;\r\n\r\nconst DelBtn = styled.button`\r\n  font-weight: bold;\r\n  border-radius:8px;\r\n  font-size:1.5rem;\r\n  height:30px;\r\n  border:none;\r\n  padding-top:5px;\r\n  padding-bottom:5px;\r\n  align-items:center;\r\n  background-color: white;\r\n  color: black;\r\n  width:10vw;\r\n  border: 2px solid #4CAF50; /* Green */\r\n  :hover{\r\n    cursor:pointer;\r\n    background-color: #4CAF50;\r\n  color: white;\r\n}\r\n  }\r\n`;\r\n\r\nclass DeleteRegion extends Component {\r\n  updateCache = (cache, payload) => {\r\n    // manually update the cache so that the data are all the same\r\n    // 1. read the cache for the data we want\r\n    const data = cache.readQuery({ query: ALL_REGIONS_QUERY });\r\n    // the deletedselect all the other regions except the deleted one from the cache\r\n    data.regions = data.regions.filter(region => region.id !== payload.data.deleteRegion.id);\r\n    //  3. write the new data back to the cache\r\n    console.log(\"getting payload\");\r\n    console.log(payload);\r\n    cache.writeQuery({ query: ALL_REGIONS_QUERY, data });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Mutation mutation={DELETE_REGION_MUTATION} variables={{ id: this.props.id }} update={this.updateCache}>\r\n          {(deleteRegion, { error }) => (\r\n            <DelBtn\r\n              onClick={() => {\r\n                if (confirm(\"Do you want to delete this candidate ?\")) {\r\n                  deleteRegion();\r\n                }\r\n              }}\r\n            >\r\n              {this.props.children}\r\n            </DelBtn>\r\n          )}\r\n        </Mutation>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DeleteRegion;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AAQA;AAAA;AAAA;AAAA;AACA;AAoBA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAcA;;;;AA/BA;AACA;AAiCA;;;;A","sourceRoot":""}